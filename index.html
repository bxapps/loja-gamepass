<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalCCC Store | Login Real</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* --- ESTILOS VISUAIS (Mantendo identidade) --- */
        :root {
            --bg-body: #0b1116; --bg-card: #161f28; --primary: #6f42c1;
            --text-main: #edf2f7; --text-sec: #a0aec0; --border: #2d3748;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-body); color: var(--text-main); height: 100vh; display: flex; flex-direction: column; }
        
        .hidden { display: none !important; }
        .btn { padding: 12px; border-radius: 6px; border: none; font-weight: 600; cursor: pointer; width: 100%; margin-top: 10px; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #5a32a3; }
        .btn-link { background: none; color: var(--primary); margin-top: 15px; font-size: 12px; text-decoration: underline; }

        /* TELA DE AUTH */
        #auth-screen { display: flex; align-items: center; justify-content: center; height: 100vh; }
        .auth-box { background: var(--bg-card); padding: 40px; border-radius: 12px; border: 1px solid var(--border); width: 100%; max-width: 400px; text-align: center; }
        .auth-input { width: 100%; background: var(--bg-body); border: 1px solid var(--border); padding: 12px; color: white; border-radius: 6px; margin-bottom: 10px; }
        
        /* HEADER DO APP */
        header { background: var(--bg-card); padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .user-email { font-size: 12px; color: var(--text-sec); margin-right: 10px; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div id="login-form" class="auth-box">
            <h2 style="margin-bottom: 20px;">Acessar Loja</h2>
            <input type="email" id="login-email" class="auth-input" placeholder="Seu E-mail">
            <input type="password" id="login-pass" class="auth-input" placeholder="Sua Senha">
            <button class="btn btn-primary" id="btnLogin">ENTRAR</button>
            <button class="btn btn-link" onclick="toggleAuth('register')">Não tem conta? Crie agora</button>
        </div>

        <div id="register-form" class="auth-box hidden">
            <h2 style="margin-bottom: 20px;">Criar Nova Conta</h2>
            <input type="email" id="reg-email" class="auth-input" placeholder="Seu melhor E-mail">
            <input type="password" id="reg-pass" class="auth-input" placeholder="Crie uma senha (min 6 digitos)">
            <button class="btn btn-primary" id="btnRegister">CRIAR CONTA</button>
            <button class="btn btn-link" onclick="toggleAuth('login')">Já tenho conta. Fazer Login</button>
        </div>
    </div>

    <div id="app-screen" class="hidden">
        <header>
            <div style="font-weight: 800; color: var(--primary);">GLOBAL<span style="color:white">CCC</span></div>
            <div style="display:flex; align-items:center;">
                <span id="display-email" class="user-email">usuario@email.com</span>
                <button onclick="logout()" style="background:#e53e3e; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">Sair</button>
            </div>
        </header>

        <div style="padding: 40px; text-align: center;">
            <h1>Bem-vindo à Loja!</h1>
            <p style="color: var(--text-sec); margin-top: 10px;">Aqui entraria o catálogo e o chat...</p>
        </div>
    </div>

    <script type="module">
        // 1. IMPORTANDO AS FUNÇÕES DO FIREBASE (NÃO APAGUE ISSO)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // 2. COLE AQUI SUA CONFIGURAÇÃO (COPIADA DO CONSOLE DO FIREBASE)
        // Substitua tudo dentro das chaves abaixo:
        const firebaseConfig = {
            apiKey: "AIzaSyAy0Eq6Xk3224bByT7xk96pI__oo2NMC1s",
            authDomain: "globalccc-6df95.firebaseapp.com",
            projectId: "globalccc-6df95",
            storageBucket: "globalccc-6df95.firebasestorage.app",
            messagingSenderId: "73583982316",
            appId: "1:73583982316:web:e343f84908fa58f719d7c9"
        };

        // Inicializa o Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // --- LÓGICA DE CADASTRO ---
        document.getElementById('btnRegister').addEventListener('click', () => {
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            createUserWithEmailAndPassword(auth, email, pass)
                .then((userCredential) => {
                    alert("Conta criada com sucesso! Você já está logado.");
                    // O onAuthStateChanged vai lidar com a troca de tela
                })
                .catch((error) => {
                    const errorCode = error.code;
                    let msg = error.message;
                    if(errorCode === 'auth/email-already-in-use') msg = "Este e-mail já está cadastrado.";
                    if(errorCode === 'auth/weak-password') msg = "A senha deve ter pelo menos 6 caracteres.";
                    alert("Erro: " + msg);
                });
        });

        // --- LÓGICA DE LOGIN ---
        document.getElementById('btnLogin').addEventListener('click', () => {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;

            signInWithEmailAndPassword(auth, email, pass)
                .then((userCredential) => {
                    // Login ok
                })
                .catch((error) => {
                    alert("E-mail ou senha incorretos.");
                });
        });

        // --- OBSERVADOR DE ESTADO (MONITORA SE TÁ LOGADO) ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Usuário está logado
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('app-screen').classList.remove('hidden');
                document.getElementById('display-email').innerText = user.email;
            } else {
                // Usuário NÃO está logado
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('app-screen').classList.add('hidden');
            }
        });

        // --- FUNÇÃO DE SAIR (LOGOUT) ---
        window.logout = function() {
            signOut(auth).then(() => {
                alert("Você saiu.");
            }).catch((error) => {
                console.error(error);
            });
        }

        // --- FUNÇÃO PARA TROCAR ENTRE LOGIN E CADASTRO ---
        window.toggleAuth = function(screen) {
            if(screen === 'register') {
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('register-form').classList.remove('hidden');
            } else {
                document.getElementById('register-form').classList.add('hidden');
                document.getElementById('login-form').classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
